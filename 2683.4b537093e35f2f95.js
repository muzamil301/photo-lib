"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2683],{2683:(R,u,l)=>{l.r(u),l.d(u,{PhotosPageModule:()=>Z});var r=l(4556),g=l(6895),P=l(433),f=l(1407),p=l(655),v=l(727),C=l(9751);class I extends v.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const d={setInterval(n,e,...t){const{delegate:s}=d;return null!=s&&s.setInterval?s.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=d;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};var b=l(8737);const m={now:()=>(m.delegate||Date).now(),delegate:void 0};class c{constructor(e,t=c.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,s){return new this.schedulerActionCtor(this,e).schedule(s,t)}}c.now=m.now;const x=new class w extends c{constructor(e,t=c.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let s;this._active=!0;do{if(s=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,s){for(;e=t.shift();)e.unsubscribe();throw s}}}(class M extends I{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var s;if(this.closed)return this;this.state=e;const o=this.id,a=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(a,o,t)),this.pending=!0,this.delay=t,this.id=null!==(s=this.id)&&void 0!==s?s:this.requestAsyncId(a,this.id,t),this}requestAsyncId(e,t,s=0){return d.setInterval(e.flush.bind(e,this),s)}recycleAsyncId(e,t,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return t;null!=t&&d.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(e,t);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o,s=!1;try{this.work(e)}catch(a){s=!0,o=a||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:s}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,b.P)(s,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}});var S=l(3532);function y(n=0,e,t=x){let s=-1;return null!=e&&((0,S.K)(e)?t=e:s=e),new C.y(o=>{let a=function A(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let h=0;return t.schedule(function(){o.closed||(o.next(h++),0<=s?this.schedule(void 0,s):o.complete())},a)})}var i=l(8256),O=l(3195),D=l(5476);let T=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-custom-loader"]],decls:5,vars:0,consts:[[1,"ellipsis-loader"]],template:function(t,s){1&t&&(i.TgZ(0,"div",0),i._UZ(1,"div")(2,"div")(3,"div")(4,"div"),i.qZA())},styles:[".ellipsis-loader[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.ellipsis-loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:33px;width:13px;height:13px;border-radius:50%;background:#ea4c89;animation-timing-function:cubic-bezier(0,1,1,0)}.ellipsis-loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){left:8px;animation:_ngcontent-%COMP%_ellipsis-loader1 .6s infinite}.ellipsis-loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:8px;animation:_ngcontent-%COMP%_ellipsis-loader2 .6s infinite}.ellipsis-loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){left:32px;animation:_ngcontent-%COMP%_ellipsis-loader2 .6s infinite}.ellipsis-loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){left:56px;animation:_ngcontent-%COMP%_ellipsis-loader3 .6s infinite}@keyframes _ngcontent-%COMP%_ellipsis-loader1{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_ellipsis-loader3{0%{transform:scale(1)}to{transform:scale(0)}}@keyframes _ngcontent-%COMP%_ellipsis-loader2{0%{transform:translate(0)}to{transform:translate(24px)}}"]}),n})();function F(n,e){1&n&&(i.TgZ(0,"ion-grid")(1,"ion-row",3)(2,"ion-col",4),i._UZ(3,"app-custom-loader"),i.qZA()()())}const L=[{path:"",component:(()=>{class n{constructor(t,s){this.galleryService=t,this.toastController=s,this.enableScroll=!0,this.loading=!0,this.pageNumber=2,this.pageLimit=10,this.favtImagesData=[],this.galleryData=[],this.favtDataSubscription=new v.w0,this.duration=0}ngOnInit(){this.loadGalleryImagesList(this.pageNumber,this.pageLimit),this.loadFavtImagesList(),this.duration=this.generateRandomNumber(700,1e3)}loadGalleryImagesList(t,s){this.galleryService.getImages(t,s).subscribe({next:o=>{this.galleryData=[...this.galleryData,...o],y(this.duration).subscribe(()=>this.loading=!1),this.enableScroll=!0},error:o=>{console.log(o),this.loading=!1}})}addToFavtList(t){this.favtImagesData.filter(o=>o.id==t.id).length>0?this.presentToast("Item already exists!"):(this.favtImagesData.push(t),this.galleryService.updateFavtList(this.favtImagesData),this.presentToast("Item added to favorite"))}detectScroll(t){return(0,p.mG)(this,void 0,void 0,function*(){const s=yield t.target.getScrollElement();if(s.scrollTop>(s.scrollHeight-s.clientHeight)/100*99){if(1==this.loading)return;this.pageNumber++,this.loading=!0,this.enableScroll=!1,y(this.duration).subscribe(()=>this.loadGalleryImagesList(this.pageNumber,this.pageLimit))}})}presentToast(t){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.toastController.create({message:t,duration:800,position:"bottom"})).present()})}generateRandomNumber(t,s){return Math.floor(t+Math.random()*(s-t+1))}loadFavtImagesList(){this.favtDataSubscription=this.galleryService.getFavtImages().subscribe(t=>{this.favtImagesData=t})}ngOnDestroy(){this.favtDataSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(O.r),i.Y36(r.yF))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-photos"]],decls:3,vars:4,consts:[[1,"ion-padding",3,"scrollEvents","ionScroll"],[3,"data","showAddToFavt","addToFavtEvent"],[4,"ngIf"],[1,"ion-align-items-center"],[1,"ion-text-center"]],template:function(t,s){1&t&&(i.TgZ(0,"ion-content",0),i.NdJ("ionScroll",function(a){return s.detectScroll(a)}),i.TgZ(1,"app-gallery-view",1),i.NdJ("addToFavtEvent",function(a){return s.addToFavtList(a)}),i.qZA(),i.YNc(2,F,4,0,"ion-grid",2),i.qZA()),2&t&&(i.Q6J("scrollEvents",!!s.enableScroll),i.xp6(1),i.Q6J("data",s.galleryData)("showAddToFavt",!0),i.xp6(1),i.Q6J("ngIf",s.loading))},dependencies:[r.wI,r.W2,r.jY,r.Nd,g.O5,D.p,T]}),n})()}];let N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[f.Bz.forChild(L),f.Bz]}),n})();var E=l(4466);let Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[r.Pc,g.ez,P.u5,N,E.m]}),n})()}}]);